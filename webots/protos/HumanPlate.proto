# IRobot Create is a hobbyist robot manufactured by iRobot that is based on the Roomba platform
# 
# Author: fabien.rohrer@cyberbotics.com

PROTO HumanPlate [
  field SFVec3f    translation 0 0 0
  field SFRotation rotation  0 1 0 0
  field SFString   controller "default"
  field SFString   controllerArgs ""
  field SFString   name "Create"
]
{
DifferentialWheels {
  translation IS translation
  rotation IS rotation
  children [
        Kinect {
          translation 0 0.025 -0.1
          rotation 0 1 0 0
          width 150
          height 100
          maxRange 3.5
          cameraName "human_kinect"
        }  
     DEF HumanStanding Transform {
      children [
        HUMAN_STANDING {
          translation 0.2 0.025 -0.5
          rotation 0 1 0 3.1415
        }
        DEF PlateShape Shape {
          appearance DEF CREATE_APPEARANCE Appearance {
            material Material {
              specularColor 0.4 0.4 0.4
            }
            texture ImageTexture {
              url [
                "textures/create.png"
              ]
            }
          }
          geometry Cylinder {
            height 0.05
            radius 0.2
          }
        }
      ]
    } 
    DEF CREATE_RIGHT_WHEEL Solid {
      translation 0.135878 -0.014 0.006176
      rotation 1 0 0 0
      children [
        Transform {
          rotation 0 0 1 1.5708
          children [
            DEF WHEEL_SHAPE Shape {
              appearance USE CREATE_APPEARANCE
              geometry IndexedFaceSet {
                coord Coordinate {
                  point [
                    0.0219125 -0.0132506 -0.0219125
                    0.0286301 -0.0132506 -0.011859
                    0.030989 -0.0132506 7.45058e-09
                    0.0286301 -0.0132506 0.011859
                    0.0219125 -0.0132506 0.0219126
                    0.011859 -0.0132506 0.0286301
                    -9.31323e-10 -0.0132506 0.030989
                    -0.011859 -0.0132506 0.0286301
                    -0.0219125 -0.0132506 0.0219126
                    -0.0286301 -0.0132506 0.011859
                    -0.030989 -0.0132506 3.72529e-09
                    -0.0286301 -0.0132506 -0.011859
                    -0.0219125 -0.0132506 -0.0219126
                    -0.011859 -0.0132506 -0.0286301
                    1.76951e-08 -0.0132506 -0.030989
                    0.011859 -0.0132506 -0.0286301
                    0.0219126 0.0132506 -0.0219125
                    0.0286301 0.0132506 -0.0118589
                    0.030989 0.0132506 4.84288e-08
                    0.0286301 0.0132506 0.011859
                    0.0219125 0.0132506 0.0219126
                    0.0118589 0.0132506 0.0286301
                    -6.61239e-08 0.0132506 0.030989
                    -0.0118591 0.0132506 0.0286301
                    -0.0219126 0.0132506 0.0219125
                    -0.0286302 0.0132506 0.0118589
                    -0.030989 0.0132506 -7.63685e-08
                    -0.0286301 0.0132506 -0.0118591
                    -0.0219125 0.0132506 -0.0219126
                    -0.0118589 0.0132506 -0.0286302
                    9.77889e-08 0.0132506 -0.030989
                    0.0118591 0.0132506 -0.0286301
                    -3.72529e-09 -0.0132506 4.65661e-09
                    -3.72529e-09 0.0132506 4.65661e-09
                  ]
                }
                texCoord TextureCoordinate {
                  point [
                    0.863918 0.226681
                    0.781472 0.144236
                    0.756197 0.182062
                    0.863918 0.226681
                    0.756197 0.182062
                    0.781472 0.144236
                    0.863918 0.226681
                    0.756197 0.182062
                    0.747322 0.226681
                    0.863918 0.226681
                    0.747322 0.226681
                    0.756197 0.182062
                    0.863918 0.226681
                    0.747322 0.226681
                    0.756198 0.2713
                    0.863918 0.226681
                    0.756198 0.2713
                    0.747322 0.226681
                    0.863918 0.226681
                    0.756198 0.2713
                    0.781472 0.309127
                    0.863918 0.226681
                    0.781472 0.309127
                    0.756198 0.2713
                    0.863918 0.226681
                    0.781472 0.309127
                    0.819299 0.334401
                    0.863918 0.226681
                    0.819299 0.334402
                    0.781472 0.309127
                    0.863918 0.226681
                    0.819299 0.334401
                    0.863918 0.343277
                    0.863918 0.226681
                    0.863918 0.343277
                    0.819299 0.334402
                    0.863918 0.226681
                    0.863918 0.343277
                    0.908537 0.334401
                    0.863918 0.226681
                    0.908537 0.334401
                    0.863918 0.343277
                    0.863918 0.226681
                    0.908537 0.334401
                    0.946363 0.309127
                    0.863918 0.226681
                    0.946364 0.309126
                    0.908537 0.334401
                    0.863918 0.226681
                    0.946363 0.309127
                    0.971638 0.2713
                    0.863918 0.226681
                    0.971638 0.2713
                    0.946364 0.309126
                    0.863918 0.226681
                    0.971638 0.2713
                    0.980513 0.226681
                    0.863918 0.226681
                    0.980513 0.226681
                    0.971638 0.2713
                    0.863918 0.226681
                    0.980513 0.226681
                    0.971638 0.182062
                    0.863918 0.226681
                    0.971638 0.182062
                    0.980513 0.226681
                    0.863918 0.226681
                    0.971638 0.182062
                    0.946363 0.144236
                    0.863918 0.226681
                    0.946363 0.144235
                    0.971638 0.182062
                    0.863918 0.226681
                    0.946363 0.144236
                    0.908537 0.118961
                    0.863918 0.226681
                    0.908537 0.118961
                    0.946363 0.144235
                    0.863918 0.226681
                    0.908537 0.118961
                    0.863918 0.110086
                    0.863918 0.226681
                    0.863917 0.110086
                    0.908537 0.118961
                    0.863918 0.226681
                    0.863918 0.110086
                    0.819299 0.118961
                    0.863918 0.226681
                    0.819298 0.118961
                    0.863917 0.110086
                    0.819299 0.118961
                    0.781472 0.144236
                    0.863918 0.226681
                    0.863918 0.226681
                    0.781472 0.144236
                    0.819298 0.118961
                    0.883435 0.0962022
                    0.883435 0.0120445
                    0.918784 0.0120445
                    0.883435 0.0962022
                    0.918784 0.0120445
                    0.918784 0.0962022
                    0.954133 0.0120445
                    0.954132 0.0962022
                    0.918784 0.0962022
                    0.954133 0.0120445
                    0.918784 0.0962022
                    0.918784 0.0120445
                    0.989481 0.0120445
                    0.989481 0.0962022
                    0.954132 0.0962022
                    0.989481 0.0120445
                    0.954132 0.0962022
                    0.954133 0.0120445
                    0.459251 0.0120445
                    0.459251 0.0962022
                    0.423902 0.0962022
                    0.459251 0.0120445
                    0.423902 0.0962022
                    0.423902 0.0120445
                    0.494599 0.0120445
                    0.494599 0.0962022
                    0.459251 0.0962022
                    0.494599 0.0120445
                    0.459251 0.0962022
                    0.459251 0.0120445
                    0.529948 0.0120445
                    0.529948 0.0962022
                    0.494599 0.0962022
                    0.529948 0.0120445
                    0.494599 0.0962022
                    0.494599 0.0120445
                    0.565297 0.0120445
                    0.565296 0.0962022
                    0.529948 0.0962022
                    0.565297 0.0120445
                    0.529948 0.0962022
                    0.529948 0.0120445
                    0.600646 0.0120445
                    0.600645 0.0962022
                    0.565296 0.0962022
                    0.600646 0.0120445
                    0.565296 0.0962022
                    0.565297 0.0120445
                    0.635994 0.0120445
                    0.635994 0.0962022
                    0.600645 0.0962022
                    0.635994 0.0120445
                    0.600645 0.0962022
                    0.600646 0.0120445
                    0.671343 0.0120445
                    0.671343 0.0962022
                    0.635994 0.0962022
                    0.671343 0.0120445
                    0.635994 0.0962022
                    0.635994 0.0120445
                    0.706692 0.0120445
                    0.706691 0.0962022
                    0.671343 0.0962022
                    0.706692 0.0120445
                    0.671343 0.0962022
                    0.671343 0.0120445
                    0.74204 0.0120445
                    0.74204 0.0962022
                    0.706691 0.0962022
                    0.74204 0.0120445
                    0.706691 0.0962022
                    0.706692 0.0120445
                    0.777389 0.0120445
                    0.777389 0.0962022
                    0.74204 0.0962022
                    0.777389 0.0120445
                    0.74204 0.0962022
                    0.74204 0.0120445
                    0.812738 0.0120445
                    0.812738 0.0962022
                    0.777389 0.0962022
                    0.812738 0.0120445
                    0.777389 0.0962022
                    0.777389 0.0120445
                    0.848086 0.0120445
                    0.848086 0.0962022
                    0.812738 0.0962022
                    0.848086 0.0120445
                    0.812738 0.0962022
                    0.812738 0.0120445
                    0.883435 0.0120445
                    0.883435 0.0962022
                    0.848086 0.0962022
                    0.883435 0.0120445
                    0.848086 0.0962022
                    0.848086 0.0120445
                  ]
                }
                coordIndex [
                  32, 0, 1, -1, 33, 17, 16, -1, 32, 1,
                  2, -1, 33, 18, 17, -1, 32, 2, 3, -1,
                  33, 19, 18, -1, 32, 3, 4, -1, 33, 20,
                  19, -1, 32, 4, 5, -1, 33, 21, 20, -1,
                  32, 5, 6, -1, 33, 22, 21, -1, 32, 6,
                  7, -1, 33, 23, 22, -1, 32, 7, 8, -1,
                  33, 24, 23, -1, 32, 8, 9, -1, 33, 25,
                  24, -1, 32, 9, 10, -1, 33, 26, 25, -1,
                  32, 10, 11, -1, 33, 27, 26, -1, 32, 11,
                  12, -1, 33, 28, 27, -1, 32, 12, 13, -1,
                  33, 29, 28, -1, 32, 13, 14, -1, 33, 30,
                  29, -1, 32, 14, 15, -1, 33, 31, 30, -1,
                  15, 0, 32, -1, 33, 16, 31, -1, 16, 0,
                  15, -1, 16, 15, 31, -1, 14, 30, 31, -1,
                  14, 31, 15, -1, 13, 29, 30, -1, 13, 30,
                  14, -1, 12, 28, 29, -1, 12, 29, 13, -1,
                  11, 27, 28, -1, 11, 28, 12, -1, 10, 26,
                  27, -1, 10, 27, 11, -1, 9, 25, 26, -1,
                  9, 26, 10, -1, 8, 24, 25, -1, 8, 25,
                  9, -1, 7, 23, 24, -1, 7, 24, 8, -1,
                  6, 22, 23, -1, 6, 23, 7, -1, 5, 21,
                  22, -1, 5, 22, 6, -1, 4, 20, 21, -1,
                  4, 21, 5, -1, 3, 19, 20, -1, 3, 20,
                  4, -1, 2, 18, 19, -1, 2, 19, 3, -1,
                  1, 17, 18, -1, 1, 18, 2, -1, 0, 16,
                  17, -1, 0, 17, 1, -1
                ]
                texCoordIndex [
                  0, 1, 2, -1, 3, 4, 5, -1, 6, 7,
                  8, -1, 9, 10, 11, -1, 12, 13, 14, -1,
                  15, 16, 17, -1, 18, 19, 20, -1, 21, 22,
                  23, -1, 24, 25, 26, -1, 27, 28, 29, -1,
                  30, 31, 32, -1, 33, 34, 35, -1, 36, 37,
                  38, -1, 39, 40, 41, -1, 42, 43, 44, -1,
                  45, 46, 47, -1, 48, 49, 50, -1, 51, 52,
                  53, -1, 54, 55, 56, -1, 57, 58, 59, -1,
                  60, 61, 62, -1, 63, 64, 65, -1, 66, 67,
                  68, -1, 69, 70, 71, -1, 72, 73, 74, -1,
                  75, 76, 77, -1, 78, 79, 80, -1, 81, 82,
                  83, -1, 84, 85, 86, -1, 87, 88, 89, -1,
                  90, 91, 92, -1, 93, 94, 95, -1, 96, 97,
                  98, -1, 99, 100, 101, -1, 102, 103, 104, -1,
                  105, 106, 107, -1, 108, 109, 110, -1, 111, 112,
                  113, -1, 114, 115, 116, -1, 117, 118, 119, -1,
                  120, 121, 122, -1, 123, 124, 125, -1, 126, 127,
                  128, -1, 129, 130, 131, -1, 132, 133, 134, -1,
                  135, 136, 137, -1, 138, 139, 140, -1, 141, 142,
                  143, -1, 144, 145, 146, -1, 147, 148, 149, -1,
                  150, 151, 152, -1, 153, 154, 155, -1, 156, 157,
                  158, -1, 159, 160, 161, -1, 162, 163, 164, -1,
                  165, 166, 167, -1, 168, 169, 170, -1, 171, 172,
                  173, -1, 174, 175, 176, -1, 177, 178, 179, -1,
                  180, 181, 182, -1, 183, 184, 185, -1, 186, 187,
                  188, -1, 189, 190, 191, -1
                ]
              }
            }
          ]
        }
      ]
      name "right wheel"
      boundingObject DEF CREATE_WHEEL_BOUNDING_OBJECT Transform {
        rotation 0 0 1 1.5708
        children [
          Shape {
            geometry Cylinder {
              height 0.026
              radius 0.031
              subdivision 24
            }
          }
        ]
      }
      physics DEF CREATE_WHEEL_PHYSICS Physics {
        density -1
        mass 0.05
      }
    }
    DEF CREATE_LEFT_WHEEL Solid {
      translation -0.135878 -0.014 0.006176
      rotation 1 0 0 0
      children [
        Transform {
          rotation 0 0 1 1.5708
          children [
            USE WHEEL_SHAPE
          ]
        }
      ]
      name "left wheel"
      boundingObject USE CREATE_WHEEL_BOUNDING_OBJECT
      physics USE CREATE_WHEEL_PHYSICS
    }
    DEF CREATE_REAR_WHEEL Solid {
      translation 0 -0.0305 0.1315
      boundingObject Sphere {
        radius 0.01
      }
      physics DEF CREATE_PASSIVE_WHEEL_PHYSICS Physics {
        density -1
        mass 0.05
      }
    }
    DEF CREATE_FRONT_WHEEL Solid {
      translation 0 -0.035 -0.129
      boundingObject Sphere {
        radius 0.01
      }
      physics USE CREATE_PASSIVE_WHEEL_PHYSICS
    }
    DEF CREATE_RECEIVER Receiver {
      translation 0 0.037 -0.152
      type "infra-red"
      channel 1
    }
    DEF CREATE_BUMPER_LEFT TouchSensor {
      rotation 0 1 0 0.726932
      name "bumper_left"
      boundingObject DEF CREATE_BUMPER_BOUNDING_OBJECT Group {
        children [
          Transform {
            translation -0.0780422 0 -0.148208
            rotation 0 1 0 0.523599
            children [
              DEF CREATE_BUMPER_BOX Box {
                size 0.082811 0.07 0.01
              }
            ]
          }
          Transform {
            translation 0 0 -0.1675
            children [
              USE CREATE_BUMPER_BOX
            ]
          }
          Transform {
            translation 0.0780422 0 -0.148208
            rotation 0 1 0 -0.523599
            children [
              USE CREATE_BUMPER_BOX
            ]
          }
        ]
      }
      physics DEF CREATE_BUMPER_PHYSICS Physics {
        density -1
        mass 0.2
        centerOfMass 0 0 -0.13
      }
    }
    DEF CREATE_BUMPER_RIGHT TouchSensor {
      rotation 0 1 0 -0.72693
      name "bumper_right"
      boundingObject USE CREATE_BUMPER_BOUNDING_OBJECT
      physics USE CREATE_BUMPER_PHYSICS
    }
    DEF CREATE_LED_ON LED {
      translation -0.061709 0.034885 -0.0202
      rotation 1 0 0 0
      children [
        DEF CREATE_LED_SHAPE Shape {
          appearance Appearance {
            material Material {
              diffuseColor 0 0.258824 0.0117647
            }
          }
          geometry IndexedFaceSet {
            coord DEF coord_LEDon Coordinate {
              point [
                0.00166228 3.55765e-05 0.00079789
                -0.000235491 -1.01477e-05 0.00168153
                8.05482e-05 0.00110406 -6.29351e-05
                -0.00166228 -3.7007e-05 0.000149153
                0.00140842 3.7007e-05 -0.00128058
                -0.000646286 -7.86036e-06 -0.00168153
              ]
            }
            coordIndex [
              1, 0, 2, -1, 2, 0, 4, -1, 2, 3,
              1, -1, 2, 4, 5, -1, 3, 2, 5, -1
            ]
          }
        }
      ]
      name "led_on"
    }
    DEF CREATE_LED_PLAY LED {
      translation 0.013196 0.034885 -0.019324
      rotation 1 0 0 0
      children [
        USE CREATE_LED_SHAPE
      ]
      name "led_play"
      color [
        0 1 0
      ]
    }
    DEF CREATE_LED_STEP LED {
      translation 0.058125 0.034885 -0.018887
      rotation 1 0 0 0
      children [
        USE CREATE_LED_SHAPE
      ]
      name "led_step"
      color [
        0 1 0
      ]
    }
    DEF CREATE_CLIFF_SENSOR_RIGHT DistanceSensor {
      translation 0.15 -0.035 -0.07
      rotation 0 0 1 -1.5708
      name "cliff_right"
      lookupTable [
        0.02 0 0
        0.0201 1 0
      ]
      type "sonar"
    }
    DEF CREATE_CLIFF_SENSOR_FRONT_RIGHT DistanceSensor {
      translation 0.04 -0.035 -0.15
      rotation 0 0 1 -1.5708
      name "cliff_front_right"
      lookupTable [
        0.02 0 0
        0.0201 1 0
      ]
      type "sonar"
    }
    DEF CREATE_CLIFF_SENSOR_FRONT_LEFT DistanceSensor {
      translation -0.04 -0.035 -0.15
      rotation 0 0 1 -1.5708
      name "cliff_front_left"
      lookupTable [
        0.02 0 0
        0.0201 1 0
      ]
      type "sonar"
    }
    DEF CREATE_CLIFF_SENSOR_LEFT DistanceSensor {
      translation -0.15 -0.035 -0.07
      rotation 0 0 1 -1.5708
      name "cliff_left"
      lookupTable [
        0.02 0 0
        0.0201 1 0
      ]
      type "sonar"
    }
  ]
  name IS name
  description "IRobot Create"
  boundingObject Cylinder {
    height 0.07
    radius 0.1675
    subdivision 24
  }
  physics Physics {
    density -1
    mass 1.8
  }
  controller IS controller
  controllerArgs IS controllerArgs
  axleLength 0.271756
  wheelRadius 0.031
  maxSpeed 50
  speedUnit 1
  encoderNoise 0
  encoderResolution 507.9188
}
}
